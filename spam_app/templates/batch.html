{% extends "base.html" %}

{% block content %}
<div class="flex items-center justify-center min-h-[80vh]">
    <div
        class="w-full max-w-2xl bg-white dark:bg-gray-800 p-10 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700">

        <div class="text-center mb-10">
            <h2
                class="text-4xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400">
                Batch Processing
            </h2>
            <p class="text-gray-600 dark:text-gray-400 text-lg">
                Upload a CSV or Excel file to check multiple messages at once.
            </p>
        </div>

        <form action="/batch" method="POST" enctype="multipart/form-data" class="space-y-8">
            <div class="flex flex-col items-center justify-center w-full">
                <label for="dropzone-file"
                    class="flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 border-gray-300 dark:border-gray-500 transition duration-300 group">
                    <div class="flex flex-col items-center justify-center pt-5 pb-6">
                        <svg class="w-16 h-16 mb-4 text-gray-400 group-hover:text-blue-500 transition-colors"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12">
                            </path>
                        </svg>
                        <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to
                                upload</span> or drag and drop</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">CSV or Excel (xlsx)</p>
                    </div>
                    <input id="dropzone-file" name="file" type="file" class="hidden" accept=".csv, .xlsx, .xls"
                        onchange="showFileName(this)" />
                </label>
            </div>

            <div id="file-name-display" class="text-center text-sm font-medium text-gray-700 dark:text-gray-300 h-6">
            </div>

            <button type="submit"
                class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-4 px-6 rounded-xl transition transform hover:scale-[1.01] shadow-lg text-lg">
                Start Batch Scan ðŸš€
            </button>
        </form>

        <div class="mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-900/30">
            <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">Instructions:</h4>
            <ul class="list-disc list-inside text-sm text-blue-700 dark:text-blue-300 space-y-1">
                <li>File must contain a column named <code>message</code>, <code>text</code>, or <code>content</code>.
                </li>
                <li>Supported formats: .csv, .xlsx, .xls</li>
                <li>Large files may take a moment to process.</li>
            </ul>
        </div>
    </div>
</div>

<script>
    function showFileName(input) {
        const display = document.getElementById('file-name-display');
        if (input.files && input.files[0]) {
            display.textContent = "Selected: " + input.files[0].name;
            display.classList.add('text-green-600', 'dark:text-green-400');
        } else {
            display.textContent = "";
        }
    }
</script>
{% endblock %}